# KappaVM

A stack-based, high-performance, scalable virtual machine.

## Overview

KappaVM is designed to be a robust and efficient virtual machine for executing stack-based bytecode. It aims to provide high performance and scalability for various applications, from scripting languages to complex computational tasks.

## Features

- **Stack-Based Architecture**: Utilizes a stack-based execution model for simplicity and efficiency.
- **High Performance**: Optimized for speed with a focus on minimizing overhead during instruction execution.
- **Scalability**: Designed to handle a wide range of workloads, from small scripts to large applications.
- **Custom Assembler**: Includes an assembler for converting human-readable assembly code into KappaVM bytecode.
- **Extensible Design**: Easy to extend with new opcodes and functionalities.

## Installation

### Prerequisites

- CMake (version 3.10 or higher)
- A C compiler (e.g., GCC or Clang)

### Building from Source

1. Clone the repository:
   ```bash
   git clone https://github.com/kayleema/kappa-vm.git
   cd kappavm
   ```

2. Create a build directory and navigate to it:
   ```bash
   mkdir build
   cd build
   ```

3. Run CMake to configure the build:
   ```bash
   cmake ..
   ```

4. Build the project:
   ```bash
   make
   ```

5. The compiled binary `kappavm` will be available in the `build` directory.

## Usage

### Running a KappaVM Bytecode File

To execute a bytecode file (e.g., `test_bytecode.kbc`), use the following command:

```bash
./build/kappavm test_bytecode.kbc
```

### Assembling Kappa Assembly Code

To assemble a Kappa assembly file (e.g., `test_assembly.kappa`) into bytecode:

```bash
# Assuming an assembler utility is part of the project
./build/kappavm --assemble test_assembly.kappa test_bytecode.kbc
```

## Disassembling Kappa Bytecode

KappaVM can disassemble bytecode back into human-readable assembly code for debugging or analysis purposes. This can be useful for understanding the bytecode generated by the assembler or for troubleshooting issues in the execution flow.

To disassemble a bytecode file (e.g., `test_bytecode.kbc`) into assembly code:

```bash
./build/kappavm --dis test_bytecode.kbc > test_disassembled.kappa
````

This command will output the disassembled code into `test_disassembled.kappa`, which you can then review or modify as needed.


## Project Structure

- **`assembler.c`, `assembler.h`**: Code for assembling Kappa assembly language into bytecode.
- **`chunk.c`, `chunk.h`**: Manages bytecode chunks, which are sequences of instructions.
- **`vm.c`, `vm.h`**: Core virtual machine implementation for executing bytecode.
- **`opcode.h`**: Defines the instruction set for KappaVM.
- **`value.h`**: Handles data types and values used within the VM.
- **`tests/`**: Directory containing test files for various components of KappaVM.
- **`main.c`**: Entry point for the KappaVM executable.

## Testing

KappaVM includes a suite of tests to ensure the reliability of its components. To build and run the tests:

1. Ensure you are in the `build` directory.
2. Run the following command:
   ```bash
   make test
   ```

This will compile and execute tests for the assembler, VM execution, and other critical components.

## Contributing

Contributions to KappaVM are welcome! If you'd like to contribute, please follow these steps:

1. Fork the repository.
2. Create a new branch for your feature or bug fix.
3. Make your changes and commit them with descriptive messages.
4. Push your branch to your fork.
5. Submit a pull request to the main repository.

Please ensure your code adheres to the project's coding standards and includes appropriate tests.

## Contact

For questions or support, please open an issue on the GitHub repository or contact the maintainers.
